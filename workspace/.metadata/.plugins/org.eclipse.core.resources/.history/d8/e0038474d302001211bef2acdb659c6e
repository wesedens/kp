/*
 * main.c
 *
 *  Created on: Sep 19, 2012
 *      Author: wedens2
 */


#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <sys/stat.h>

int exists(const char *filename)
{
	struct stat st;
	return stat(filename, &st);
}

size_t get_size(const char *filename)
{
	struct stat st;
	stat(filename, &st);
	return st.st_size;
}

int main(int argc, char *argv[])
{
	unsigned char *buffer    = 0;
	FILE          *pFile     = 0;
	size_t         file_size = 0;
	size_t         i         = 0;

	if ( argc < 2 ){
		printf("usage: cb0c <filename>\n");
		return 0;
	}

	if ( 0 != exists(argv[1]))	{
		perror("File does not exist");
		return 0;
	}

	printf("File: %s\n", argv[1]);

	file_size = get_size(argv[1]);
	buffer    = malloc(file_size);
	pFile     = fopen ( argv[1] , "rb" );

	fgets(buffer,file_size,pFile);

	for(i=0; i<file_size; ++i){
		printf("%c ",buffer[i]);
	}
	printf("\n");
	free(buffer);
}
